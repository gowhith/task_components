<!-- llm-logger.html -->
<!--
  ‚úÖ Task 4: LLM Prompt Controller
  Component: <llm-logger>
  Description:
  - Input + "Generate" button
  - Simulates LLM delay
  - Shows fake response
  - Logs prompt/response
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LLM Logger</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      display: flex;
      justify-content: center;
      padding-top: 60px;
    }
  </style>

  <script type="module">
    import { LitElement, html, css } from 'https://cdn.skypack.dev/lit';

    class LlmLogger extends LitElement {
      static properties = {
        prompt: { type: String },
        response: { type: String },
        loading: { type: Boolean }
      };

      constructor() {
        super();
        this.prompt = '';
        this.response = '';
        this.loading = false;
      }

      static styles = css`
        :host {
          display: block;
          background: white;
          padding: 20px;
          border-radius: 10px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
          max-width: 480px;
          width: 100%;
        }

        h3 {
          margin-top: 0;
        }

        input[type="text"] {
          width: 100%;
          padding: 10px;
          font-size: 14px;
          border: 2px solid #ccc;
          border-radius: 6px;
          margin-bottom: 12px;
          box-sizing: border-box;
        }

        button {
          padding: 8px 16px;
          font-size: 14px;
          background: #1976d2;
          color: white;
          border: none;
          border-radius: 6px;
          cursor: pointer;
        }

        button:disabled {
          background: #aaa;
        }

        .response {
          margin-top: 16px;
          font-family: monospace;
          background: #f9f9f9;
          padding: 12px;
          border-radius: 6px;
          white-space: pre-wrap;
          font-size: 14px;
        }
      `;

      render() {
        return html`
          <h3>ü§ñ LLM Prompt Logger</h3>

          <input
            type="text"
            placeholder="Enter prompt..."
            .value=${this.prompt}
            @input=${e => this.prompt = e.target.value}
          />

          <button
            @click=${this._generateResponse}
            ?disabled=${this.loading || this.prompt.trim() === ''}
          >
            ${this.loading ? 'Generating...' : 'Generate'}
          </button>

          ${this.response
            ? html`<div class="response">${this.response}</div>`
            : ''}
        `;
      }

      async _generateResponse() {
        try {
          this.loading = true;
          this.response = '';

          const input = this.prompt.trim();
          console.log("üì§ Prompt sent:", input);

          // Simulate 2s LLM delay
          await new Promise(r => setTimeout(r, 2000));

          const mockResponse = `LLM Response: "${input.toUpperCase()}"`;
          this.response = mockResponse;

          console.log("‚úÖ LLM Response:", {
            prompt: input,
            response: mockResponse
          });
        } catch (err) {
          console.error("‚ùå Error generating response:", err);
        } finally {
          this.loading = false;
        }
      }
    }

    customElements.define('llm-logger', LlmLogger);
  </script>
</head>
<body>
  <llm-logger></llm-logger>
</body>
</html>