<!-- llm-prompt-controller.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LLM Prompt Controller</title>
  <script type="module">
    import { LitElement, html, css } from 'https://unpkg.com/lit@2.5.0/index.js?module';

    // Mock Logger utility (simulating @formd-ui-workspace/logger)
    class Logger {
      static log(entry) {
        console.log('[Logger] Prompt:', entry.prompt);
        console.log('[Logger] Response:', entry.response);
      }
    }

    class LLMPromptController extends LitElement {
      static properties = {
        prompt: { type: String, state: true },
        response: { type: String, state: true },
        loading: { type: Boolean, state: true }
      };

      constructor() {
        super();
        this.prompt = '';
        this.response = '';
        this.loading = false;
      }

      static styles = css`
        .input-area {
          margin-bottom: 10px;
        }
        input {
          width: 300px;
          padding: 5px;
        }
        button {
          padding: 5px 10px;
          margin-left: 10px;
        }
        .response {
          margin-top: 15px;
          font-weight: bold;
        }
      `;

      render() {
        return html`
          <div class="input-area">
            <input
              type="text"
              placeholder="Enter prompt"
              .value=${this.prompt}
              @input=${this._onInput}
            />
            <button @click=${this._generate} ?disabled=${this.loading}>Generate</button>
          </div>
          ${this.loading ? html`<div>Loading response...</div>` : ''}
          ${this.response ? html`<div class="response">Response: ${this.response}</div>` : ''}
        `;
      }

      _onInput(e) {
        this.prompt = e.target.value;
      }

      async _generate() {
        if (!this.prompt.trim()) {
          alert('Prompt cannot be empty');
          return;
        }

        this.loading = true;
        this.response = '';
        await new Promise(resolve => setTimeout(resolve, 2000));

        const mockResponse = `Mock response to: "${this.prompt}"`;
        this.response = mockResponse;
        this.loading = false;

        Logger.log({ prompt: this.prompt, response: this.response });
      }
    }

    customElements.define('llm-prompt-controller', LLMPromptController);
  </script>

  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
    }
  </style>
</head>
<body>
  <h3>Mock LLM Interaction Logger</h3>
  <llm-prompt-controller></llm-prompt-controller>
</body>
</html>
