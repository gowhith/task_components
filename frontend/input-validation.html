<!-- input-validation.html -->
<!--
  ‚úÖ Task 3: Input Component with Character Count and Validation
  Component: <input-component>
  Features:
  - Reactively tracks text input
  - Shows "X/200 characters"
  - Red warning if over maxLength
  - Shows error if empty on submit
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Input Validation Component</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      display: flex;
      justify-content: center;
      padding-top: 60px;
    }
  </style>

  <script type="module">
    import { LitElement, html, css } from 'https://cdn.skypack.dev/lit';

    class InputComponent extends LitElement {
      static properties = {
        maxLength: { type: Number },
        value: { type: String },
        showError: { type: Boolean }
      };

      constructor() {
        super();
        this.maxLength = 200;
        this.value = '';
        this.showError = false;
      }

      static styles = css`
        :host {
          display: block;
          background: white;
          padding: 20px;
          border-radius: 10px;
          box-shadow: 0 2px 6px rgba(0,0,0,0.1);
          max-width: 480px;
          width: 100%;
        }

        h3 {
          margin-top: 0;
        }

        textarea {
          width: 100%;
          height: 100px;
          font-size: 14px;
          padding: 10px;
          border: 2px solid #ccc;
          border-radius: 6px;
          resize: vertical;
          box-sizing: border-box;
        }

        textarea.exceeded {
          border-color: red;
        }

        .count {
          margin-top: 6px;
          font-size: 13px;
          color: #555;
        }

        .count.exceeded {
          color: red;
        }

        .error {
          color: red;
          font-size: 13px;
          margin-top: 6px;
        }

        button {
          margin-top: 10px;
          padding: 8px 14px;
          background: #1976d2;
          color: white;
          border: none;
          border-radius: 6px;
          font-size: 14px;
          cursor: pointer;
        }
      `;

      render() {
        const exceeded = this.value.length > this.maxLength;

        return html`
          <h3>üìù Input Validation Component</h3>

          <textarea
            class=${exceeded ? 'exceeded' : ''}
            .value=${this.value}
            @input=${this._onInput}
            placeholder="Type your message here..."
          ></textarea>

          <div class="count ${exceeded ? 'exceeded' : ''}">
            ${this.value.length}/${this.maxLength} characters
          </div>

          ${this.showError
            ? html`<div class="error">‚ö†Ô∏è Input cannot be empty.</div>`
            : ''}

          <button @click=${this._onSubmit}>Submit</button>
        `;
      }

      _onInput(e) {
        this.value = e.target.value;
        this.showError = false;
      }

      _onSubmit() {
        if (this.value.trim().length === 0) {
          this.showError = true;
        } else {
          alert(`‚úÖ Submitted:\n${this.value}`);
          this.value = '';
        }
      }
    }

    customElements.define('input-component', InputComponent);
  </script>
</head>
<body>
  <input-component></input-component>
</body>
</html>